gate_project_check_complete = {
    custom_tooltip = {
        text = gate_project_goal
        scope:journal_entry = {
            trigger_if = {
                limit = {
                    has_variable = gate_magic_project_progress
                }
                is_goal_complete = yes
            }
            trigger_else = {
                always = no
            }
        }
    }
}

gate_project_is_paused = {
    NOT = {
        scope:journal_entry = {
            has_modifier = gate_modifier_project_cost
            trigger_if = {
                limit = {
                    var:gate_magic_project_type ?= gate_project_type_infrastructure
                }
                has_modifier = gate_modifier_project_infrastructure_cost
            }
        }
    }
}

gate_project_can_start_any = {
	OR = {
		gate_project_can_start_expand_research_institute = yes
		gate_project_can_start_domain = yes
		gate_project_can_start_improve_mana_extraction = yes
		gate_project_can_start_modernize_seed_selection = yes
	}
}

gate_project_can_start_expand_research_institute = {
	capital = {
		has_building = building_magic_research_institute
	}
	NAND = {
		has_modifier = gate_modifier_project_institute_new_wing
		has_modifier = gate_modifier_project_institute_improved_instruments
		has_modifier = gate_modifier_project_institute_better_mana_conduits
	}
	is_magic_country = yes
	has_magic_researcher = yes
	has_active_magic_project = no
}

gate_project_can_start_domain = {
	has_technology_researched = formalized_magic
	trigger_if = {
		limit = {
			exists = var:magic_ethics
		}
		var:magic_ethics < 3
	}
	is_magic_country = yes
	has_magic_researcher = yes
	has_active_magic_project = no
	custom_tooltip = {
		text = je_gate_project_domain_condition_not_researched
		NOT = {
			has_variable = gate_has_researched_domain
		}
	}
}

gate_project_can_start_improve_mana_extraction = {
	has_technology_researched = gate_mana_extraction
	custom_tooltip = {
		text = trigger_gate_project_can_has_unimproved_mana_extraction
		any_scope_building = {
			is_building_group = bg_mana_extraction
			NOT = {
				has_modifier = gate_modifier_project_improved_mana_extraction
			}
		}
	}
	is_magic_country = yes
	has_magic_researcher = yes
	has_active_magic_project = no
}

gate_project_can_start_modernize_seed_selection = {
	has_technology_researched = magic_farming
	custom_tooltip = {
		text = trigger_gate_project_can_has_unimproved_magic_seed
		any_scope_building = {
			is_building_group = bg_druid_groves
			NOT = {
				has_modifier = gate_modifier_project_modernize_seed_selection
			}
		}
	}
	is_magic_country = yes
	has_magic_researcher = yes
	has_active_magic_project = no
}

gate_project_can_improve_building = {
}