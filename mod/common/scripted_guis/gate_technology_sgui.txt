gate_button_technology = {
	scope = country

	is_valid = {
		is_magic_country = yes
	}

	# Cycle through tabs or close window
	effect = {
		open_window_with_tabs = {
			tab_count = 3
			tab_variable = gate_main_technology_active_tab
			window_variable = gate_main_technology_is_active
		}
	}
}

sgui_gate_technology_visisblity = {
	scope = country

	is_shown = {
		AND = {
			has_variable = gate_main_technology_is_active
			has_variable = gate_main_technology_active_tab
		}
	}
}

sgui_gate_technology_tab_production = {
	scope = country

	is_shown = {
		AND = {
			has_variable = gate_main_technology_is_active
			has_variable = gate_main_technology_active_tab
			var:gate_main_technology_active_tab = 1
		}
	}

	effect = {
		set_variable = {
			name = gate_main_technology_active_tab
			value = 1
		}
	}
}

sgui_gate_technology_tab_military = {
	scope = country

	is_shown = {
		AND = {
			has_variable = gate_main_technology_is_active
			has_variable = gate_main_technology_active_tab
			var:gate_main_technology_active_tab = 2
		}
	}

	effect = {
		set_variable = {
			name = gate_main_technology_active_tab
			value = 2
		}
	}
}

sgui_gate_technology_tab_society = {
	scope = country

	is_shown = {
		AND = {
			has_variable = gate_main_technology_is_active
			has_variable = gate_main_technology_active_tab
			var:gate_main_technology_active_tab = 3
		}
	}

	effect = {
		set_variable = {
			name = gate_main_technology_active_tab
			value = 3
		}
	}
}

# THIS = country
# scope:technology = technology
sgui_gate_window_execute_research = {
	scope = country

	effect = {
		set_variable = {
			name = magic_research
			value = scope:technology
		}
		set_variable = {
			name = magic_research_progress
			value = 0
		}
	}

	is_valid = {
		AND = {
			NOT = { has_variable = magic_research }
			NOT = { has_technology_researched = scope:technology }
		}
	}
}

# THIS = country
# scope:technology = technology
sgui_gate_window_cancel_research = {
	scope = country

	effect = {
		remove_magic_research = yes
	}

	confirm_title = gg_cancel_magic_research
	confirm_text = gg_cancel_magic_research_text
}