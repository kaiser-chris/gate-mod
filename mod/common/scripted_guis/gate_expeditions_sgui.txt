sgui_gate_expedition_open = {
    scope = none

    is_valid = {
        has_variable = gate_open_expedition
    }

    effect = {
        remove_variable = gate_open_expedition
    }
}

sgui_gate_map_equals = {
    scope = country

    saved_scopes = {
        potential_location
    }

    is_shown = {
        var:gate_expedition ?= {
            var:location ?= scope:potential_location
        }
    }
}

sgui_gate_map_location_choose = {
    scope = country

    saved_scopes = {
        location
    }

    effect = {
        if = {
            limit = {
                var:gate_map_sidebar ?= scope:location
                has_variable = gate_map_sidebar
            }
            remove_variable = gate_map_sidebar
        }
        else = {
            set_variable = {
                name = gate_map_sidebar
                value = scope:location
            }
        }
    }
}

sgui_gate_map_location_reset = {
    scope = country

    effect = {
        remove_variable = gate_map_sidebar
    }
}

sgui_gate_map_location_interact = {
    scope = country

    saved_scopes = {
        location
        interaction
    }

    is_shown = {
        gate_expedition_interaction_valid = yes
    }

    is_valid = {
        hidden_trigger = {
            gate_expedition_interaction_valid = yes
        }
        gate_expedition_has_budget = {
            amount = 100
        }
    }

    effect = {
        remove_variable = gate_map_sidebar
    }
}

sgui_gate_expedition_button_uncover = {
    scope = country

    saved_scopes = {
        cost
    }

    is_valid = {
        gate_expedition_has_budget = {
            amount = 300
        }
        gate_expedition_has_covered = yes
    }

    effect = {
        gate_setup_expedition_uncover_state = yes
    }
}