# Root = Country
on_monthly_pulse = {
    on_actions = {
        on_monthly_calculate_mana_saturation
        on_monthly_add_gate_immigration
    }
}

on_monthly_calculate_mana_saturation = {
    effect = {
        calculate_monthly_mana_saturation = yes
    }
}

on_monthly_add_gate_immigration = {
    effect = {
        add_gate_immigration = yes
    }
}

on_yearly_pulse_country = {
    on_actions = {
        on_yearly_mana_saturation_other_events
        on_yearly_mana_saturation_dragon_events
    }
}

on_yearly_mana_saturation_other_events = {
    random_events = {
        chance_of_no_event = 40
        60 = mana_saturation.11 # Magic Soils
    }
}
on_yearly_mana_saturation_dragon_events = {
    random_events = {
        chance_of_no_event = 95
        1 = mana_saturation.3 # Dragon - Greenland
        1 = mana_saturation.5 # Dragon - California
        1 = mana_saturation.7 # Dragon - Siberia
        1 = mana_saturation.9 # Dragon - Himalayas
    }
}

# Root = Building
on_production_method_changed = {
    on_actions = {
        on_production_method_changed_immigration
    }
}

on_production_method_changed_immigration = {
    effect = {
        set_building_immigration_traits = yes
    }
}