# Root = any
on_monthly_pulse = {
    on_actions = {
        on_monthly_calculate_mana_saturation
        on_monthly_statistics
        on_monthly_cleanup
        on_monthly_mana_density
    }
}

on_monthly_calculate_mana_saturation = {
    effect = {
        calculate_mana_saturation = yes
    }
}

on_monthly_statistics = {
    effect = {
        collect_magic_countries = yes
    }
}

on_monthly_cleanup = {
    effect = {
        cleanup_research_institutes = yes
    }
}

on_monthly_mana_density = {
    effect = {
        # Between 0 and 3 times
        random = {
            chance = 20
            propogate_mana_density = yes
        }
        random = {
            chance = 20
            propogate_mana_density = yes
        }
        random = {
            chance = 20
            propogate_mana_density = yes
        }
    }
}

# Root = country
on_monthly_pulse_country = {
    on_actions = {
        on_monthly_calculate_magic_research
        on_monthly_trigger_monster_attack
        on_monthly_cleanup_researcher
        on_monthly_add_gate_immigration
    }
}

on_monthly_add_gate_immigration = {
    effect = {
        add_gate_immigration = yes
    }
}

on_monthly_calculate_magic_research = {
    effect = {
        calculate_magic_research = yes
    }
}

on_monthly_trigger_monster_attack = {
    effect = {
        trigger_monster_attack = yes
    }
}

on_monthly_cleanup_researcher = {
    effect = {
        cleanup_researchers = yes
    }
}