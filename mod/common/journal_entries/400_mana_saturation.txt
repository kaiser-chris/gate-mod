je_mana_saturation = {
	icon = "gfx/interface/icons/event_icons/event_gate_magic_world.dds"

	group = je_group_global_international_situations

	scripted_button = je_mana_saturation_button_slave_ritual

	immediate = {
        scope:journal_entry = {
            add_com_dlc_icon = {
                dlc = dlc_magic_gate
            }
        }
        set_global_variable = {
            name = global_mana_saturation
            value = 0
        }
	}

    should_be_involved = {
        OR = {
            is_player = yes
            NOT = {
                is_country_type = decentralized
            }
        }
    }

    is_shown_when_inactive = {
        hidden_trigger = {
            trigger_if = {
                limit = {
                    exists = global_var:global_mana_saturation
                }
                global_var:global_mana_saturation < 100
            }
            trigger_else = {
                always = no
            }
        }
    }

    possible = {
        hidden_trigger = {
            trigger_if = {
                limit = {
                    exists = global_var:global_mana_saturation
                }
                global_var:global_mana_saturation < 100
            }
            trigger_else = {
                always = no
            }
        }
    }

	status_desc = {
		first_valid = {
			triggered_desc = {
				desc = je_mana_saturation_low_progress
				trigger = {
					global_var:global_mana_saturation < 50
				}
			}
			triggered_desc = {
				desc = je_mana_saturation_medium_progress
				trigger = {
					global_var:global_mana_saturation < 80
				}
			}
			triggered_desc = {
				desc = je_mana_saturation_high_progress
				trigger = {
					global_var:global_mana_saturation < 100
				}
			}
		}
	}

	complete = {
		OR = {
			hidden_trigger = {
				has_global_variable = gate_mana_saturation_full
			}
            hidden_trigger = {
                global_var:global_mana_saturation >= 100
            }
			scope:journal_entry = {
				is_goal_complete = yes
			}
		}
	}

	on_complete = {
		set_global_variable = {
			name = gate_mana_saturation_full
		}
		set_global_variable = {
			name = global_mana_saturation
			value = 100
		}
	}

    on_complete_all_involved = {
        trigger_event = {
            id = gate_mana_saturation.1
            popup = yes
        }
    }

	can_revolution_inherit = yes

	current_value = {
		value = global_var:global_mana_saturation
	}

	goal_add_value = {
		value = 100
	}

	progressbar = yes

	weight = 200
	should_be_pinned_by_default = yes
}