je_mana_saturation = {
	icon = "gfx/interface/icons/event_icons/event_world.dds"

	group = je_group_magical_affairs

	scripted_button = je_mana_saturation_button_slave_ritual

	immediate = {
		save_scope_as = loc_country_scope
		set_global_variable = {
			name = gate_mana_saturation_progress
			value = {
				value = 7
				max = 100
				min = 0
			}
		}
	}

	status_desc = {
		first_valid = {
			triggered_desc = {
				desc = je_mana_saturation_low_progress
				trigger = {
					scope:journal_entry = {
						scripted_bar_progress = {
							name = gate_mana_saturation_progress_bar
							value < 50
						}
					}
				}
			}
			triggered_desc = {
				desc = je_mana_saturation_medium_progress
				trigger = {
					scope:journal_entry = {
						scripted_bar_progress = {
							name = gate_mana_saturation_progress_bar
							value < 80
						}
					}
				}
			}
			triggered_desc = {
				desc = je_mana_saturation_high_progress
				trigger = {
					scope:journal_entry = {
						scripted_bar_progress = {
							name = gate_mana_saturation_progress_bar
							value < 100
						}
					}
				}
			}
		}
	}

	on_weekly_pulse = {
		effect = {
			scope:journal_entry = {
				set_global_variable = {
					name = gate_mana_saturation_progress
					value = "scripted_bar_progress(gate_mana_saturation_progress_bar)"
				}
			}
		}
	}

	complete = {
		trigger_if = {
			OR = {
				hidden_trigger = {
					has_global_variable = gate_mana_saturation_full
				}
				custom_tooltip = {
					text = je_mana_saturation_goal_tt
					scope:journal_entry = {
						scripted_bar_progress = {
							name = gate_mana_saturation_progress_bar
							value >= 100
						}
					}
				}
			}
		}
	}

	on_complete = {
		set_global_variable = {
			name = gate_mana_saturation_full
		}
		set_global_variable = {
			name = gate_mana_saturation_progress
			value = 100
		}
		trigger_event = {
			id = mana_saturation.1
			popup = yes
		}
	}

	transferable = no
	can_revolution_inherit = yes

	progressbar = no
	scripted_progress_bar = gate_mana_saturation_progress_bar

	weight = 200
	should_be_pinned_by_default = yes
}