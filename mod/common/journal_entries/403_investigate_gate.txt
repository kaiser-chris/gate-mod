je_investigate_gate = {
	icon = "gfx/interface/icons/event_icons/event_world.dds"

	group = je_group_magical_affairs

	scripted_button = je_investigate_gate_button_focus_academia

	complete = {
		scope:journal_entry = {
			is_goal_complete = yes
		}
	}

	immediate = {
		set_variable = {
			name = je_investigate_gate_progress
			value = 0
		}
	}

	invalid = {
		AND = {
			hidden_trigger = {
				is_gate_planet_country = no
			}
			NOT = {
				has_building = building_gate
			}
		}
	}

	on_monthly_pulse = {
		effect = {
			if = {
				limit = {
					has_building = building_gate
				}
				change_variable = {
					name = je_investigate_gate_progress
					add = {
						# Base
						value = 1
						if = {
							limit = {
								has_modifier = focus_investigate_gate_cost_modifier
							}
							# Focused Efforts
							add = 2
						}
					}
				}
			}
		}
	}


	on_complete = {
		hidden_effect = {
			remove_modifier = focus_investigate_gate_cost_modifier
		}
		remove_variable = je_investigate_gate_progress
		trigger_event = {
			id = investigate_gate.1
			popup = yes
		}
		if = {
			limit = {
				has_journal_entry = je_magic_research
			}
			je:je_magic_research = {
				add_progress = {
					name = pb_gate_magic_research
					value = 10
				}
			}
		}
	}

	on_invalid = {
		hidden_effect = {
			remove_modifier = focus_investigate_gate_cost_modifier
		}
		remove_variable = je_investigate_gate_progress
	}

	current_value = {
		value = root.var:je_investigate_gate_progress
	}

	goal_add_value = {
		add = 60
	}

	progressbar = yes

	transferable = no
	can_revolution_inherit = yes

	weight = 200
	should_be_pinned_by_default = yes
}