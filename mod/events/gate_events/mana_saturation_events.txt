namespace = mana_saturation

mana_saturation.1 = {
	type = country_event
	
	title = mana_saturation.1.t
	desc = mana_saturation.1.d
	flavor = mana_saturation.1.f
	
	event_image = {
		video = "asia_confucianism_shinto"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"

	icon = "gfx/interface/icons/event_icons/event_default.dds"
	
	duration = 3
	
	trigger = {
	}

	immediate = {
		every_country = {
			limit = {
				NOT = {
					has_technology_researched = magic_understanding_production
					has_technology_researched = magic_understanding_society
					has_technology_researched = magic_understanding_military
				}
			}
			add_technology_researched = magic_understanding_production
			add_technology_researched = magic_understanding_society
			add_technology_researched = magic_understanding_military
		}
	}

	option = {
		name = mana_saturation.1.a
		default_option = yes
	}
}

mana_saturation.2 = {
	type = country_event

	title = mana_saturation.2.t
	desc = mana_saturation.2.d
	flavor = mana_saturation.2.f

	event_image = {
		video = "southamerica_slave_chains"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"

	icon = "gfx/interface/icons/event_icons/event_default.dds"

	duration = 3

	trigger = {
	}

	immediate = {
	}

	option = {
		name = mana_saturation.2.a
		kill_population = {
			value = 10000
			pop_type = slaves
		}
		change_infamy = 10
		custom_tooltip = {
			text = mana_saturation.2.a_progress_tt
			change_global_variable = {
				name = gate_mana_saturation_progress_ritual_var
				add = 5
			}
		}
	}

	option = {
		name = mana_saturation.2.b
		default_option = yes
	}
}

mana_saturation.3 = {
	type = country_event
	placement = scope:dragon_greenland_state

	title = mana_saturation.dragon.t
	desc = mana_saturation.dragon_greenland.d
	flavor = mana_saturation.dragon_greenland.f

	event_image = {
		video = "unspecific_devastation"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"

	icon = "gfx/interface/icons/event_icons/event_skull.dds"

	duration = 3

	trigger = {
		NOT = { has_global_variable = dragon_greenland_var }
		NOT = { has_global_variable = gate_mana_saturation_full }
		any_scope_state = {
			state_region = s:STATE_GREENLAND
		}
	}

	immediate = {
		set_global_variable = dragon_greenland_var
		random_scope_state = {
			limit = {
				state_region = s:STATE_GREENLAND
			}
			save_scope_as = dragon_greenland_state
			owner = {
				save_scope_as = dragon_greenland_country
				set_variable = dragon_greenland_country_var
			}
		}
		every_country = {
			limit = {
				is_player = yes
				NOT = { has_variable = dragon_greenland_country_var }
			}
			trigger_event = { id = mana_saturation.4 } #notification event
		}
	}

	option = { #help our people
		name = mana_saturation.dragon.victim.a
		default_option = yes
		scope:dragon_greenland_state = {
			add_modifier = {
				name = dragon_help_modifier
				months = short_modifier_time
			}
		}
		scope:dragon_greenland_state.state_region = {
			add_devastation = 50
		}
		every_state = {
			limit = {
				any_neighbouring_state = {
					this = scope:dragon_greenland_state
				}
			}
			state_region = {
				add_devastation = 20
			}
		}
		add_modifier = {
			name = dragon_cost_modifier
			months = short_modifier_time
			multiplier = money_amount_multiplier_small
		}
	}

	option = { #nothing we can do
		name = mana_saturation.dragon.victim.b
		scope:dragon_greenland_state = {
			add_modifier = {
				name = dragon_no_help_modifier
				months = short_modifier_time
			}
		}
		scope:dragon_greenland_state.state_region = {
			add_devastation = 80
		}
		every_state = {
			limit = {
				any_neighbouring_state = {
					this = scope:dragon_greenland_state
				}
			}
			state_region = {
				add_devastation = 50
			}
		}
		capital = {
			add_radicals_in_state = { #public outrage
				value = medium_radicals
			}
		}
	}
}

mana_saturation.4 = {
	type = country_event
	placement = scope:dragon_greenland_state

	title = mana_saturation.dragon.t
	desc = mana_saturation.dragon_greenland.d
	flavor = mana_saturation.dragon_greenland.f

	event_image = {
		video = "unspecific_devastation"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"

	icon = "gfx/interface/icons/event_icons/event_skull.dds"

	duration = 3

	option = { #send some humanitarian help
		name = mana_saturation.dragon.other.a
		change_relations = {
			country = scope:dragon_greenland_country
			value = 30
		}
		add_modifier = {
			name = dragon_cost_modifier
			months = short_modifier_time
			multiplier = money_amount_multiplier_small
		}
	}

	option = { #it doesn't affect us that much
		name = mana_saturation.dragon.other.b
		default_option = yes
		change_relations = {
			country = scope:dragon_greenland_country
			value = -30
		}
		change_infamy = 5
	}
}

mana_saturation.5 = {
	type = country_event
	placement = scope:dragon_california_state

	title = mana_saturation.dragon.t
	desc = mana_saturation.dragon_california.d
	flavor = mana_saturation.dragon_california.f

	event_image = {
		video = "unspecific_devastation"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"

	icon = "gfx/interface/icons/event_icons/event_skull.dds"

	duration = 3

	trigger = {
		NOT = { has_global_variable = dragon_california_var }
		NOT = { has_global_variable = gate_mana_saturation_full }
		any_scope_state = {
			state_region = s:STATE_CALIFORNIA
		}
	}

	immediate = {
		set_global_variable = dragon_california_var
		random_scope_state = {
			limit = {
				state_region = s:STATE_CALIFORNIA
			}
			save_scope_as = dragon_california_state
			owner = {
				save_scope_as = dragon_california_country
				set_variable = dragon_california_country_var
			}
		}
		every_country = {
			limit = {
				is_player = yes
				NOT = { has_variable = dragon_california_country_var }
			}
			trigger_event = { id = mana_saturation.6 } #notification event
		}
	}

	option = { #help our people
		name = mana_saturation.dragon.victim.a
		default_option = yes
		scope:dragon_california_state = {
			add_modifier = {
				name = dragon_help_modifier
				months = short_modifier_time
			}
		}
		scope:dragon_california_state.state_region = {
			add_devastation = 50
		}
		every_state = {
			limit = {
				any_neighbouring_state = {
					this = scope:dragon_california_state
				}
			}
			state_region = {
				add_devastation = 20
			}
		}
		add_modifier = {
			name = dragon_cost_modifier
			months = short_modifier_time
			multiplier = money_amount_multiplier_small
		}
	}

	option = { #nothing we can do
		name = mana_saturation.dragon.victim.b
		scope:dragon_california_state = {
			add_modifier = {
				name = dragon_no_help_modifier
				months = short_modifier_time
			}
		}
		scope:dragon_california_state.state_region = {
			add_devastation = 80
		}
		every_state = {
			limit = {
				any_neighbouring_state = {
					this = scope:dragon_california_state
				}
			}
			state_region = {
				add_devastation = 50
			}
		}
		capital = {
			add_radicals_in_state = { #public outrage
				value = medium_radicals
			}
		}
	}
}

mana_saturation.6 = {
	type = country_event
	placement = scope:dragon_california_state

	title = mana_saturation.dragon.t
	desc = mana_saturation.dragon_california.d
	flavor = mana_saturation.dragon_california.f

	event_image = {
		video = "unspecific_devastation"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"

	icon = "gfx/interface/icons/event_icons/event_skull.dds"

	duration = 3

	option = { #send some humanitarian help
		name = mana_saturation.dragon.other.a
		change_relations = {
			country = scope:dragon_california_country
			value = 30
		}
		add_modifier = {
			name = dragon_cost_modifier
			months = short_modifier_time
			multiplier = money_amount_multiplier_small
		}
	}

	option = { #it doesn't affect us that much
		name = mana_saturation.dragon.other.b
		default_option = yes
		change_relations = {
			country = scope:dragon_california_country
			value = -30
		}
		change_infamy = 5
	}
}

mana_saturation.7 = {
	type = country_event
	placement = scope:dragon_kolyma_state

	title = mana_saturation.dragon.t
	desc = mana_saturation.dragon_kolyma.d
	flavor = mana_saturation.dragon_kolyma.f

	event_image = {
		video = "unspecific_devastation"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"

	icon = "gfx/interface/icons/event_icons/event_skull.dds"

	duration = 3

	trigger = {
		NOT = { has_global_variable = dragon_kolyma_var }
		NOT = { has_global_variable = gate_mana_saturation_full }
		any_scope_state = {
			state_region = s:STATE_KOLYMA
		}
	}

	immediate = {
		set_global_variable = dragon_kolyma_var
		random_scope_state = {
			limit = {
				state_region = s:STATE_KOLYMA
			}
			save_scope_as = dragon_kolyma_state
			owner = {
				save_scope_as = dragon_kolyma_country
				set_variable = dragon_kolyma_country_var
			}
		}
		every_country = {
			limit = {
				is_player = yes
				NOT = { has_variable = dragon_kolyma_country_var }
			}
			trigger_event = { id = mana_saturation.8 } #notification event
		}
	}

	option = { #help our people
		name = mana_saturation.dragon.victim.a
		default_option = yes
		scope:dragon_kolyma_state = {
			add_modifier = {
				name = dragon_help_modifier
				months = short_modifier_time
			}
		}
		scope:dragon_kolyma_state.state_region = {
			add_devastation = 50
		}
		every_state = {
			limit = {
				any_neighbouring_state = {
					this = scope:dragon_kolyma_state
				}
			}
			state_region = {
				add_devastation = 20
			}
		}
		add_modifier = {
			name = dragon_cost_modifier
			months = short_modifier_time
			multiplier = money_amount_multiplier_small
		}
	}

	option = { #nothing we can do
		name = mana_saturation.dragon.victim.b
		scope:dragon_kolyma_state = {
			add_modifier = {
				name = dragon_no_help_modifier
				months = short_modifier_time
			}
		}
		scope:dragon_kolyma_state.state_region = {
			add_devastation = 80
		}
		every_state = {
			limit = {
				any_neighbouring_state = {
					this = scope:dragon_kolyma_state
				}
			}
			state_region = {
				add_devastation = 50
			}
		}
		capital = {
			add_radicals_in_state = { #public outrage
				value = medium_radicals
			}
		}
	}
}

mana_saturation.8 = {
	type = country_event
	placement = scope:dragon_kolyma_state

	title = mana_saturation.dragon.t
	desc = mana_saturation.dragon_kolyma.d
	flavor = mana_saturation.dragon_kolyma.f

	event_image = {
		video = "unspecific_devastation"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"

	icon = "gfx/interface/icons/event_icons/event_skull.dds"

	duration = 3

	option = { #send some humanitarian help
		name = mana_saturation.dragon.other.a
		change_relations = {
			country = scope:dragon_kolyma_country
			value = 30
		}
		add_modifier = {
			name = dragon_cost_modifier
			months = short_modifier_time
			multiplier = money_amount_multiplier_small
		}
	}

	option = { #it doesn't affect us that much
		name = mana_saturation.dragon.other.b
		default_option = yes
		change_relations = {
			country = scope:dragon_kolyma_country
			value = -30
		}
		change_infamy = 5
	}
}

mana_saturation.9 = {
	type = country_event
	placement = scope:dragon_himalaya_state

	title = mana_saturation.dragon.t
	desc = mana_saturation.dragon_himalaya.d
	flavor = mana_saturation.dragon_himalaya.f

	event_image = {
		video = "unspecific_devastation"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"

	icon = "gfx/interface/icons/event_icons/event_skull.dds"

	duration = 3

	trigger = {
		NOT = { has_global_variable = dragon_himalaya_var }
		NOT = { has_global_variable = gate_mana_saturation_full }
		any_scope_state = {
			state_region = s:STATE_HIMALAYAS
		}
	}

	immediate = {
		set_global_variable = dragon_himalaya_var
		random_scope_state = {
			limit = {
				state_region = s:STATE_HIMALAYAS
			}
			save_scope_as = dragon_himalaya_state
			owner = {
				save_scope_as = dragon_himalaya_country
				set_variable = dragon_himalaya_country_var
			}
		}
		every_country = {
			limit = {
				is_player = yes
				NOT = { has_variable = dragon_himalaya_country_var }
			}
			trigger_event = { id = mana_saturation.10 } #notification event
		}
	}

	option = { #help our people
		name = mana_saturation.dragon.victim.a
		default_option = yes
		scope:dragon_himalaya_state = {
			add_modifier = {
				name = dragon_help_modifier
				months = short_modifier_time
			}
		}
		scope:dragon_himalaya_state.state_region = {
			add_devastation = 50
		}
		every_state = {
			limit = {
				any_neighbouring_state = {
					this = scope:dragon_himalaya_state
				}
			}
			state_region = {
				add_devastation = 20
			}
		}
		add_modifier = {
			name = dragon_cost_modifier
			months = short_modifier_time
			multiplier = money_amount_multiplier_small
		}
	}

	option = { #nothing we can do
		name = mana_saturation.dragon.victim.b
		scope:dragon_himalaya_state = {
			add_modifier = {
				name = dragon_no_help_modifier
				months = short_modifier_time
			}
		}
		scope:dragon_himalaya_state.state_region = {
			add_devastation = 80
		}
		every_state = {
			limit = {
				any_neighbouring_state = {
					this = scope:dragon_himalaya_state
				}
			}
			state_region = {
				add_devastation = 50
			}
		}
		capital = {
			add_radicals_in_state = { #public outrage
				value = medium_radicals
			}
		}
	}
}

mana_saturation.10 = {
	type = country_event
	placement = scope:dragon_himalaya_state

	title = mana_saturation.dragon.t
	desc = mana_saturation.dragon_himalaya.d
	flavor = mana_saturation.dragon_himalaya.f

	event_image = {
		video = "unspecific_devastation"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"

	icon = "gfx/interface/icons/event_icons/event_skull.dds"

	duration = 3

	option = { #send some humanitarian help
		name = mana_saturation.dragon.other.a
		change_relations = {
			country = scope:dragon_himalaya_country
			value = 30
		}
		add_modifier = {
			name = dragon_cost_modifier
			months = short_modifier_time
			multiplier = money_amount_multiplier_small
		}
	}

	option = { #it doesn't affect us that much
		name = mana_saturation.dragon.other.b
		default_option = yes
		change_relations = {
			country = scope:dragon_himalaya_country
			value = -30
		}
		change_infamy = 5
	}
}

mana_saturation.11 = {
	type = country_event
	placement = scope:magic_growing_state

	title = mana_saturation.11.t
	desc = mana_saturation.11.d
	flavor = mana_saturation.11.f

	event_image = {
		video = "africa_prosperous_farm"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"

	icon = "gfx/interface/icons/event_icons/event_growing.dds"

	duration = 3

	trigger = {
		is_player = yes
		global_var:magic_growing_var <= 20
	}

	immediate = {
		change_global_variable = {
			name = magic_growing_var
			add = 1
		}
		random_state = {
			limit = {
				NOT = {
					has_state_trait = state_trait_northern_canadian_terrain
					has_state_trait = state_trait_siberian_terrain
					has_state_trait = state_trait_arctic_whaling
					has_state_trait = state_trait_good_soils
					has_state_trait = state_trait_black_soil
				}
			}
			save_scope_as = magic_growing_state
		}
	}

	option = {
		name = mana_saturation.11.a
		default_option = yes
		scope:magic_growing_state.state_region = {
			add_state_trait = state_trait_magic_soil
		}
	}
}