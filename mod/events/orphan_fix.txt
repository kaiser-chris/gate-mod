namespace = orphan_fix

# This file is here to shut up the error log about unused variables
# These variables are used for the GUI or in localizations
orphan_fix.1 = {
    type = country_event

    placement = root

    hidden = yes

	# DO NOT CALL THIS EVENT
	trigger = {
		always = no
	}
	
	cancellation_trigger = {
		always = yes
	}

	immediate = {
		if = {
			limit = {
				global_var:gate_mana_saturation_progress < 0
				var:weekly_magic_innovation < 0
				flag:character_opinion_magic_researcher = yes
				flag:character_opinion_magic_researcher_missing_institute = yes
			}
			every_in_global_list = {
				variable = magic_countries
				change_infamy = 0
			}
			every_in_global_list = {
				variable = com_custom_war_goals
			}
			every_in_global_list = {
				variable = com_custom_war_goals_types
			}
			every_in_global_list = {
				variable = com_active_war_goals_pressed
			}
			set_variable = com_custom_war_goal_cost
			remove_variable = com_custom_war_goal_cost
			set_global_variable = gate_war_goal_demand_magic_cost
			remove_global_variable = gate_war_goal_demand_magic_cost
			set_global_variable = gate_war_goal_demand_magic_cost_primary
			remove_global_variable = gate_war_goal_demand_magic_cost_primary
			set_global_variable = gate_war_goal_demand_magic_infamy
			remove_global_variable = gate_war_goal_demand_magic_infamy
			save_scope_as = war_goal
		}
	}
	
	orphan = yes
}